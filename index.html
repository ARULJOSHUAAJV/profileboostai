<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Complete Resume Builder AI</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body { font-family: Arial, sans-serif; background: #f5f5f5; padding: 20px; }
    .container { max-width: 900px; margin: auto; background: #fff; padding: 25px; border-radius: 8px; }
    label { font-weight: bold; display: block; margin-top: 15px; }
    input, textarea { width: 100%; padding: 8px; margin-top: 5px; margin-bottom: 10px; border: 1px solid #ccc; border-radius: 5px; }
    button { margin-top: 20px; padding: 10px 20px; background-color: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer; }
    button:hover { background-color: #0056b3; }
    #resume { margin-top: 40px; background: #fff; padding: 20px; border: 1px solid #333; }
    h2 { text-align: center; }
    .section { margin-bottom: 20px; }
    h3 { margin-bottom: 5px; border-bottom: 1px solid #ccc; padding-bottom: 5px; }
  </style>
</head>
<body>
  <div class="container">
    <h1>AI Resume Builder</h1>

    <!-- User Input Fields -->
    <label>Full Name</label><input id="name" />
    <label>Email</label><input id="email" />
    <label>Phone</label><input id="phone" />
    <label>Location (City, State)</label><input id="location" />
    <label>LinkedIn</label><input id="linkedin" />
    <label>Portfolio</label><input id="portfolio" />

    <label>Education</label><textarea id="education"></textarea>
    <label>Experience</label><textarea id="experience"></textarea>
    <label>Skills</label><textarea id="skills"></textarea>
    <label>Projects</label><textarea id="projects"></textarea>
    <label>Certifications & Courses</label><textarea id="certifications"></textarea>
    <label>Internships</label><textarea id="internships"></textarea>
    <label>Awards & Achievements</label><textarea id="awards"></textarea>
    <label>Languages</label><textarea id="languages"></textarea>
    <label>Hobbies & Interests</label><textarea id="hobbies"></textarea>

    <button onclick="generateResume()">Generate Resume & Download PDF</button>

    <!-- Resume Output -->
    <div id="resume" style="display: none;"></div>
  </div>

  <!-- PDF Conversion Library -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

  <script>
    const OPENAI_API_KEY = "YOUR_OPENAI_API_KEY"; // Replace this

    async function generateResume() {
      const data = {
        name: document.getElementById("name").value,
        email: document.getElementById("email").value,
        phone: document.getElementById("phone").value,
        location: document.getElementById("location").value,
        linkedin: document.getElementById("linkedin").value,
        portfolio: document.getElementById("portfolio").value,
        education: document.getElementById("education").value,
        experience: document.getElementById("experience").value,
        skills: document.getElementById("skills").value,
        projects: document.getElementById("projects").value,
        certifications: document.getElementById("certifications").value,
        internships: document.getElementById("internships").value,
        awards: document.getElementById("awards").value,
        languages: document.getElementById("languages").value,
        hobbies: document.getElementById("hobbies").value
      };

      const prompt = `Write a 3-line professional resume summary for a candidate named ${data.name}, located in ${data.location}. Education: ${data.education}. Experience: ${data.experience}. Skills: ${data.skills}.`;

      const summary = await getAISummary(prompt);

      // Build resume HTML
      const resumeHTML = `
        <h2>${data.name}'s Resume</h2>
        <div class="section"><strong>Email:</strong> ${data.email} | <strong>Phone:</strong> ${data.phone}</div>
        <div class="section"><strong>Location:</strong> ${data.location}</div>
        <div class="section"><strong>LinkedIn:</strong> ${data.linkedin} | <strong>Portfolio:</strong> ${data.portfolio}</div>

        <div class="section"><h3>AI-Generated Summary</h3><p>${summary}</p></div>
        <div class="section"><h3>Education</h3><p>${data.education}</p></div>
        <div class="section"><h3>Experience</h3><p>${data.experience}</p></div>
        <div class="section"><h3>Skills</h3><p>${data.skills}</p></div>
        <div class="section"><h3>Projects</h3><p>${data.projects}</p></div>
        <div class="section"><h3>Certifications & Courses</h3><p>${data.certifications}</p></div>
        <div class="section"><h3>Internships</h3><p>${data.internships}</p></div>
        <div class="section"><h3>Awards & Achievements</h3><p>${data.awards}</p></div>
        <div class="section"><h3>Languages</h3><p>${data.languages}</p></div>
        <div class="section"><h3>Hobbies & Interests</h3><p>${data.hobbies}</p></div>
      `;

      const resumeDiv = document.getElementById("resume");
      resumeDiv.innerHTML = resumeHTML;
      resumeDiv.style.display = "block";

      // Wait for DOM update
      setTimeout(() => {
        html2pdf().set({
          margin: 0.5,
          filename: `${data.name.replace(/\s+/g, "_")}_Resume.pdf`,
          image: { type: 'jpeg', quality: 0.98 },
          html2canvas: { scale: 2 },
          jsPDF: { unit: 'in', format: 'letter', orientation: 'portrait' }
        }).from(resumeDiv).save();
      }, 500);
    }

    async function getAISummary(prompt) {
      try {
        const res = await fetch("https://api.openai.com/v1/completions", {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
            Authorization: `Bearer ${OPENAI_API_KEY}`
          },
          body: JSON.stringify({
            model: "text-davinci-003",
            prompt: prompt,
            max_tokens: 150,
            temperature: 0.7
          })
        });

        const data = await res.json();
        return data.choices[0].text.trim();
      } catch (e) {
        return "AI summary could not be generated.";
      }
    }
  </script>
</body>
</html>
